# Notes for Week 2 - eHealth and Health Information Systems

## eHealth
* No consensus made on the definition
* A [review paper](https://www.jmir.org/2005/1/e1/) by Oh *et. al.* on the definition of *eHealth*
    * The word *internet* was mentioned in 27 out of 51 papers
    * Some mentioned the concepts of distance, geography, and location
* Key elements include
    * ICT
    * Healthcare
    * Internet
    * Education
    * Efficiency of delivery
* Main applications
    * Paper-less and electronic records
    * Streamlined workflows
    * Remote diagnosis and surgery
    * etc.

## Health information system (HIS)
An HIS refers to [a system designed to manage healthcare data](https://digitalguardian.com/blog/what-health-information-system)

## Implementations of eHealth
* Planned and implemented by states
* New South Wales is the leading state regarding eHealth. Details can be found on its [eHealth website](https://www.ehealth.nsw.gov.au)
* Country-wise programs are exemplified by [My Health Record](https://www.myhealthrecord.gov.au/)

## Electronic medical record (EMR)
* The digital system designed to facilitate paper-less, computer-based records for medical histories.

## Electronic health record (EHR)
* Similar to EMR
* Difference (if any): Previous, EMR refers to the data within a hospital and does not move with the patient. In comparison, EHR emphasises that the data is attached to the patient. [Details](https://www.nextgen.com/insights/emr-vs-ehr/emr-vs-ehr)
* Can be used interchangeably with EMR nowadays.

## EMR / EHR software examples
* General practice
    * [OpenEMR](https://www.open-emr.org/)
    * [Open MRS](https://openmrs.org/)
    * [75Health](https://www.75health.com/)
* Oncology
    * [MOSAIQ](https://www.elekta.com/software-solutions/care-management/mosaiq-medical-oncology)

## Computerized physician order entry (CPOE)
CPOE is an integrated computerized system into which physicians directly enter orders related to patient care, medications, therapies, diagnostic tests, and other ancillary services. It may or may not have decision-supporting tools. ([Source](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC1294035))

It's an electronic system to manage orders within a medical centre.

## Radiology information system (RIS)
A radiological information system is the core system for the electronic management of imaging departments. The major functions of the RIS can include patient scheduling, resource management, examination performance tracking, reporting, results distribution, and procedure billing. ([source](https://en.wikipedia.org/wiki/Radiological_information_system))


* Picture archiving and communication system (PACS)
    * PACS takes charge of storing and transferring imaging data within the hospital.
    * It receives imaging data generated by the medical imaging devices such as MRI, CT, ultrasound and PET (positron emission tomography).
    * The data then goes through a quality assurance (QA) process to check for any incorrect information, before being stored in the PACS server.
    * The PACS server responds to the request from other software (e.g. a doctor's request from the EMR) and send the data over.
    * Example software: [Orthanc](https://www.orthanc-server.com/)

* Digital imaging and communication in medicine (DICOM)
    * PACS typically uses DICOM, which is a worldwide standard to handle medical imaging data.
    * In brief, the DICOM standard has two aspects: as a file format and as a communication protocol.
        * As a file format
            * Medical images will be generated as the DICOM format (.dcm) from the scanning device.
            * A DICOM file includes
                * A header, which stores the meta-data, such as 
                    * Patient information: name, date of birth, gender, etc.
                    * Scanning information: type of scan, the manufacturer, etc.
                    * Spatial information of the scan.
                * A pixel array, which holds the image(s)
        * As a standard
            * DICOM specifies the communication protocols between devices, such as 
                * Responding to queries
                * Printing the data
    * Software: [3D Slicer](https://www.slicer.org/)
    * Sample dataset: [MRHead](https://slicer.kitware.com/midas3/item/220833)

## Robotic surgery and remote surgery
* Robotic surgery
    * A history of robotic surgery: [Origins of surgical robotics: From space to the operating room, Takács *et. al.*](https://www.researchgate.net/publication/290495998_Origins_of_surgical_robotics_From_space_to_the_operating_room)

    * Da Vinci robotic system
        * A widely used commercial [robotic system](https://www.intuitive.com/en-us/products-and-services/da-vinci/systems), mainly consists of 
            * A console (master), operated by the surgeon
            * A series of robotic arms (slave), which performs operations on the patient
            * A visualisation panel

* Remote surgery
    * The slave device can be placed remotely, while the surgeon operates on the master device via the internet.

## Decision support system (DSS)
A DSS provides with clinically relevant information to assist the doctor for decision making. It may or may not uses AI.
[IBM Watson](https://www.ibm.com/developerworks/library/os-ind-watson) is an example of clinical DSS with AI.

## Database
With HIS systems, the key is to handle digital data. Hence the key technology in the backend is the database.

A database is more than storing the data. It needs to take account of the robustness and security at a large scale.

### Relational database
Relational database is the traditional widely used database worldwide.
* Consists of one or more tables
* Each table is defined by the columns
* Data can be inserted to the table
* Relationship exists between tables
* The design of tables is called a *schema*.
* The database schema in a hospital can be very complex ([example](https://www.w3resource.com/sql-exercises/hospital-database-exercise/index.php))

### Relational database management system (RDBMS)
* The software (system) to manage relational databases
* Open source
    * [MySQL](https://www.mysql.com/downloads/)
    * [PostgreSQL](https://www.postgresql.org/)
    * [SQLite](https://www.sqlite.org)
* Commercial
    * Microsoft SQL Server
    * Oracle
    * IBM DB2
* Python has included the SQLite ([sqlite3](https://docs.python.org/3/library/sqlite3.html)) as part of the standard library.

#### SQL keywords
Here are the keywords along with the corresponding commands from [this in-class example](./sql_demo.md). You should be able to understand the SQL commands by the end of this session.

Comments (explanatory text) in SQL is denoted by `/* */`, which won't be executed.

1. To create a table, use `CREATE TABLE <table-name> ...`, then define the columns and the data type.

    ```sql
    /* Create a table named herbs, which has four columns: name, pinyin, property and jingluo */
    CREATE TABLE herbs (name text, pinyin text, property text, jingluo text);
    ```
1. To insert values, use `INSERT INTO ... VALUES ...`.

    ```sql
    /* Insert three rows into the table herbs */
    INSERT INTO herbs VALUES ('生石膏', 'Sheng Shi Gao', '淡 微寒', '肺 胃');
    INSERT INTO herbs VALUES ('白芍', 'Shao Yao', '酸', '肝');
    INSERT INTO herbs VALUES ('赤芍', 'Shao Yao', '酸', '肝 心');
    ```

1. To search, use `SELECT <column-name> FROM <table-name>`

    ```sql
    /* Get the column name and property */
    SELECT name, property FROM herbs;

    /* Get all columns */
    SELECT * FROM herbs;
    ```

1. To set a criteria on the row during search, use `WHERE` 

    ```sql
    /* Get all columns where its pinyin is Shao Yao */
    SELECT * FROM herbs WHERE pinyin='Shao Yao';
    ```

1. To limit the length of the result, use `LIMIT`.

    ```sql
    /* Get 2 rows from the search*/
    SELECT * FROM herbs LIMIT 2;
    ```

1. To the get unique (non-overlapping) values, use `DISTINCT`.

    ```sql
    /* Get the unique values for the column pinyin from the herbs table */
    SELECT DISTINCT pinyin FROM herbs;
    ```

1. To sort the result, use `ORDER BY`, use `DESC` for the descending order.

    ```sql
    /* Get all columns and sort by the column pinyin */
    SELECT * FROM herbs ORDER BY pinyin;

    /* use DESC to reverse the order */
    SELECT * FROM herbs ORDER BY pinyin DESC;
    ```

1. To change data, use `UPDATE`.

    ```sql
    /* Change the pinyin to Bai Shao from the table herbs for the row where the name is 白芍 */
    UPDATE herbs SET pinyin='Bai Shao' WHERE name='白芍';
    ```

1. To remove a row, use `DELETE`.

    ```sql
    /* Delete the row where the name is 赤芍 */
    DELETE FROM herbs WHERE name='赤芍';
    ```

## NoSQL
Apart from the relational database, there are a range of other databases, generally known as NoSQL (Not-only SQL) databases. These are databases not based on tables. Most of them are developed for big data which relational databases can have bottlenecks. [MongoDB](https://www.mongodb.com/) is a popular NoSQL using JSON instead of tables.